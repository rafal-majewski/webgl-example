var O=Object.defineProperty;var w=(e,n,o)=>n in e?O(e,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[n]=o;var r=(e,n,o)=>w(e,typeof n!="symbol"?n+"":n,o);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))t(c);new MutationObserver(c=>{for(const i of c)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&t(u)}).observe(document,{childList:!0,subtree:!0});function o(c){const i={};return c.integrity&&(i.integrity=c.integrity),c.referrerPolicy&&(i.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?i.credentials="include":c.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(c){if(c.ep)return;c.ep=!0;const i=o(c);fetch(c.href,i)}})();function q(e){return[e.x,e.y,e.z]}function F(e){return[e.red,e.green,e.blue]}function z(e){const n=q(e.position),o=F(e.color);return[...n,...o]}function b(e){const n=z(e.vertex1),o=z(e.vertex2),t=z(e.vertex3);return[...n,...o,...t]}function d(e){const n=b(e.left),o=b(e.right),t=b(e.top),c=b(e.bottom);return[...n,...o,...t,...c]}function I(e){const n=d(e.left),o=d(e.right),t=d(e.bottom),c=d(e.top),i=d(e.near),u=d(e.far);return[...n,...o,...t,...c,...i,...u]}function T(e){const n=I(e);return new Float32Array(n)}function N(e,n){return[[1,0,0,0],[0,1,0,0],[0,0,(n+e)/(n-e),1],[0,0,-2*(n*e)/(n-e),0]]}function $(e){return[[1/Math.tan(e.horizontalRadians/2),0,0,0],[0,1/Math.tan(e.verticalRadians/2),0,0],[0,0,1,0],[0,0,0,1]]}function j(e){return[[Math.cos(e),0,Math.sin(e),0],[0,1,0,0],[-Math.sin(e),0,Math.cos(e),0],[0,0,0,1]]}function H(e){return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[-e.x,-e.y,-e.z,1]]}function U(e){return[[1,0,0,0],[0,Math.cos(e),Math.sin(e),0],[0,-Math.sin(e),Math.cos(e),0],[0,0,0,1]]}function Y(e,n){return[[e[0][0]*n[0][0]+e[0][1]*n[1][0]+e[0][2]*n[2][0]+e[0][3]*n[3][0],e[0][0]*n[0][1]+e[0][1]*n[1][1]+e[0][2]*n[2][1]+e[0][3]*n[3][1],e[0][0]*n[0][2]+e[0][1]*n[1][2]+e[0][2]*n[2][2]+e[0][3]*n[3][2],e[0][0]*n[0][3]+e[0][1]*n[1][3]+e[0][2]*n[2][3]+e[0][3]*n[3][3]],[e[1][0]*n[0][0]+e[1][1]*n[1][0]+e[1][2]*n[2][0]+e[1][3]*n[3][0],e[1][0]*n[0][1]+e[1][1]*n[1][1]+e[1][2]*n[2][1]+e[1][3]*n[3][1],e[1][0]*n[0][2]+e[1][1]*n[1][2]+e[1][2]*n[2][2]+e[1][3]*n[3][2],e[1][0]*n[0][3]+e[1][1]*n[1][3]+e[1][2]*n[2][3]+e[1][3]*n[3][3]],[e[2][0]*n[0][0]+e[2][1]*n[1][0]+e[2][2]*n[2][0]+e[2][3]*n[3][0],e[2][0]*n[0][1]+e[2][1]*n[1][1]+e[2][2]*n[2][1]+e[2][3]*n[3][1],e[2][0]*n[0][2]+e[2][1]*n[1][2]+e[2][2]*n[2][2]+e[2][3]*n[3][2],e[2][0]*n[0][3]+e[2][1]*n[1][3]+e[2][2]*n[2][3]+e[2][3]*n[3][3]],[e[3][0]*n[0][0]+e[3][1]*n[1][0]+e[3][2]*n[2][0]+e[3][3]*n[3][0],e[3][0]*n[0][1]+e[3][1]*n[1][1]+e[3][2]*n[2][1]+e[3][3]*n[3][1],e[3][0]*n[0][2]+e[3][1]*n[1][2]+e[3][2]*n[2][2]+e[3][3]*n[3][2],e[3][0]*n[0][3]+e[3][1]*n[1][3]+e[3][2]*n[2][3]+e[3][3]*n[3][3]]]}function W(...e){return e.reduce((n,o)=>Y(n,o))}const B=.1,G=300;function D(e){const n=$(e.fieldOfView),o=N(B,G),t=H(e.position),c=j(e.orientation.horizontalRadians),i=U(e.orientation.verticalRadians),u=W(t,c,i,o,n);return new Float32Array(u.flat())}function K(e){return`#version 300 es
precision mediump float;
in vec3 ${e};
out vec4 color;

void main() {
	color = vec4(${e}, 1.0);
}`}function X(e,n,o,t){return`#version 300 es
in vec3 ${e};
in vec3 ${n};
uniform mat4 ${o};
out vec3 ${t};

void main() {
	${t} = ${n};
	gl_Position = ${o} * vec4(${e}, 1.0);
}`}const M="v_color";function J(e,n,o){const t=X(e,n,o,M),c=K(M);return{vertex:t,fragment:c}}function Q(e,n,o){const t=e.createProgram();return e.attachShader(t,n),e.attachShader(t,o),e.linkProgram(t),t}function y(e,n,o){const t=e.createShader(n);return e.shaderSource(t,o),e.compileShader(t),t}function Z(e,n){const o=y(e,e.VERTEX_SHADER,n.vertex),t=y(e,e.FRAGMENT_SHADER,n.fragment);return Q(e,o,t)}const s=class s{constructor(n,o){r(this,"gl");r(this,"uniformProjectionLocation");this.gl=n,this.uniformProjectionLocation=o}static create(n){n.clearColor(0,0,0,1);const o=J(s.attributePositionVariableName,s.attributeColorVariableName,s.uniformProjectionVariableName),t=Z(n,o);n.useProgram(t);const c=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,c);const i=n.getAttribLocation(t,s.attributePositionVariableName);n.enableVertexAttribArray(i),n.vertexAttribPointer(i,s.positionSize,n.FLOAT,!1,s.strideBytes,s.positionOffsetBytes);const u=n.getAttribLocation(t,s.attributeColorVariableName);n.enableVertexAttribArray(u),n.vertexAttribPointer(u,s.colorSize,n.FLOAT,!1,s.strideBytes,s.colorOffsetBytes);const l=n.getUniformLocation(t,s.uniformProjectionVariableName);return n.enable(n.DEPTH_TEST),n.depthFunc(n.LESS),new s(n,l)}paint(n,o){this.gl.clear(this.gl.COLOR_BUFFER_BIT);const t=T(n);this.gl.bufferData(this.gl.ARRAY_BUFFER,t,this.gl.STATIC_DRAW);const c=D(o);this.gl.uniformMatrix4fv(this.uniformProjectionLocation,!1,c),this.gl.drawArrays(this.gl.TRIANGLES,0,s.squareInCubeCount*s.triangleInSquareCount*s.vertexInTriangleCount)}resize(){const n=this.gl.canvas,o=n.parentElement;n.width=o.clientWidth,n.height=o.clientHeight,this.gl.viewport(0,0,n.width,n.height)}getCanvasDimensions(){const n=this.gl.canvas;return{width:n.width,height:n.height}}};r(s,"attributePositionVariableName","a_position"),r(s,"dimensionInCoordinatesCount",3),r(s,"componentInColorCount",3),r(s,"triangleInSquareCount",4),r(s,"squareInCubeCount",6),r(s,"positionSize",s.dimensionInCoordinatesCount),r(s,"attributeColorVariableName","a_color"),r(s,"colorSize",s.componentInColorCount),r(s,"colorOffsetBytes",s.positionSize*Float32Array.BYTES_PER_ELEMENT),r(s,"strideBytes",(s.positionSize+s.colorSize)*Float32Array.BYTES_PER_ELEMENT),r(s,"positionOffsetBytes",0),r(s,"vertexInTriangleCount",3),r(s,"uniformProjectionVariableName","u_projection");let v=s;function f(e,n,o,t){const c={position:{x:(e.position.x+n.position.x+o.position.x+t.position.x)/4,y:(e.position.y+n.position.y+o.position.y+t.position.y)/4,z:(e.position.z+n.position.z+o.position.z+t.position.z)/4},color:{red:(e.color.red+n.color.red+o.color.red+t.color.red)/4,green:(e.color.green+n.color.green+o.color.green+t.color.green)/4,blue:(e.color.blue+n.color.blue+o.color.blue+t.color.blue)/4}};return{left:{vertex1:e,vertex2:c,vertex3:o},right:{vertex1:n,vertex2:c,vertex3:t},bottom:{vertex1:e,vertex2:c,vertex3:n},top:{vertex1:o,vertex2:c,vertex3:t}}}function k(e,n,o,t,c,i,u,l){const C=f(e,n,o,t),R=f(c,i,u,l),A=f(e,n,c,i),L=f(o,t,u,l),E=f(e,o,c,u),P=f(n,t,i,l);return{left:C,right:R,bottom:A,top:L,near:E,far:P}}const _={position:{x:-.5,y:-.5,z:2},color:{red:0,green:0,blue:1}},V={position:{x:-.5,y:-.5,z:1},color:{red:0,green:0,blue:0}},m={position:{x:-.5,y:.5,z:2},color:{red:0,green:1,blue:1}},x={position:{x:-.5,y:.5,z:1},color:{red:0,green:1,blue:0}},ee={position:{x:.5,y:-.5,z:2},color:{red:1,green:0,blue:1}},ne={position:{x:.5,y:-.5,z:1},color:{red:1,green:0,blue:0}},oe={position:{x:.5,y:.5,z:2},color:{red:1,green:1,blue:1}},te={position:{x:.5,y:.5,z:1},color:{red:1,green:1,blue:0}},S=k(V,_,x,m,ne,ee,te,oe);function ce(e,n){return{verticalRadians:Math.min(n,Math.atan(Math.tan(n/2)*(e.height/e.width))*2),horizontalRadians:Math.min(n,Math.atan(Math.tan(n/2)*(e.width/e.height))*2)}}const se={horizontalRadians:0,verticalRadians:0};function ie(){const e=Math.sin(3e-4*Date.now()),n=Math.cos(3e-4*Date.now());return{x:e,y:n,z:0}}function g(e,n){const o=ce(e,n);return{position:ie(),fieldOfView:o,orientation:se}}const re=document.getElementById("canvas"),ue=re.getContext("webgl2"),a=v.create(ue);a.resize();const ae=a.getCanvasDimensions(),p=.5*Math.PI;let h=g(ae,p);a.paint(S,h);window.addEventListener("resize",function(){a.resize();const n=a.getCanvasDimensions();h=g(n,p),a.paint(S,h)});requestAnimationFrame(function e(){const n=a.getCanvasDimensions();h=g(n,p),a.paint(S,h),requestAnimationFrame(e)});
