var F=Object.defineProperty;var P=(t,e,n)=>e in t?F(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var a=(t,e,n)=>P(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const s of c)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(c){const s={};return c.integrity&&(s.integrity=c.integrity),c.referrerPolicy&&(s.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?s.credentials="include":c.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(c){if(c.ep)return;c.ep=!0;const s=n(c);fetch(c.href,s)}})();function B(t){return[t.x,t.y,t.z]}function E(t){return[t.red,t.green,t.blue]}function v(t){const e=B(t.position),n=E(t.color);return[...e,...n]}function L(t){const e=v(t.vertex1),n=v(t.vertex2),o=v(t.vertex3);return[...e,...n,...o]}function N(t){return t.flatMap(e=>L(e))}function O(t){const e=N(t);return new Float32Array(e)}function I(t,e,n){const o=t.createProgram();return t.attachShader(o,e),t.attachShader(o,n),t.linkProgram(o),o}function z(t,e,n){const o=t.createShader(e);return t.shaderSource(o,n),t.compileShader(o),o}function j(t,e){const n=z(t,t.VERTEX_SHADER,e.vertex),o=z(t,t.FRAGMENT_SHADER,e.fragment);return I(t,n,o)}function $(t){return`#version 300 es
precision mediump float;
in vec3 ${t};
out vec4 color;

void main() {
	color = vec4(${t}, 1.0);
}`}function H(t,e,n,o){return`#version 300 es
in vec3 ${t};
in vec3 ${e};
uniform mat4 ${n};
out vec3 ${o};

void main() {
	${o} = ${e};
	gl_Position = ${n} * vec4(${t}, 1.0);
}`}const y="v_color";function U(t,e,n){const o=H(t,e,n,y),c=$(y);return{vertex:o,fragment:c}}function q(t){return[[1/Math.tan(t.horizontalRadians/2),0,0,0],[0,1/Math.tan(t.verticalRadians/2),0,0],[0,0,1,0],[0,0,0,1]]}function Y(t){return[[Math.cos(t),0,Math.sin(t),0],[0,1,0,0],[-Math.sin(t),0,Math.cos(t),0],[0,0,0,1]]}function W(t,e){return[[1,0,0,0],[0,1,0,0],[0,0,(e+t)/(e-t),1],[0,0,-2*(e*t)/(e-t),0]]}function G(t){return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[-t.x,-t.y,-t.z,1]]}function K(t){return[[1,0,0,0],[0,Math.cos(t),Math.sin(t),0],[0,-Math.sin(t),Math.cos(t),0],[0,0,0,1]]}function X(t,e){return[[t[0][0]*e[0][0]+t[0][1]*e[1][0]+t[0][2]*e[2][0]+t[0][3]*e[3][0],t[0][0]*e[0][1]+t[0][1]*e[1][1]+t[0][2]*e[2][1]+t[0][3]*e[3][1],t[0][0]*e[0][2]+t[0][1]*e[1][2]+t[0][2]*e[2][2]+t[0][3]*e[3][2],t[0][0]*e[0][3]+t[0][1]*e[1][3]+t[0][2]*e[2][3]+t[0][3]*e[3][3]],[t[1][0]*e[0][0]+t[1][1]*e[1][0]+t[1][2]*e[2][0]+t[1][3]*e[3][0],t[1][0]*e[0][1]+t[1][1]*e[1][1]+t[1][2]*e[2][1]+t[1][3]*e[3][1],t[1][0]*e[0][2]+t[1][1]*e[1][2]+t[1][2]*e[2][2]+t[1][3]*e[3][2],t[1][0]*e[0][3]+t[1][1]*e[1][3]+t[1][2]*e[2][3]+t[1][3]*e[3][3]],[t[2][0]*e[0][0]+t[2][1]*e[1][0]+t[2][2]*e[2][0]+t[2][3]*e[3][0],t[2][0]*e[0][1]+t[2][1]*e[1][1]+t[2][2]*e[2][1]+t[2][3]*e[3][1],t[2][0]*e[0][2]+t[2][1]*e[1][2]+t[2][2]*e[2][2]+t[2][3]*e[3][2],t[2][0]*e[0][3]+t[2][1]*e[1][3]+t[2][2]*e[2][3]+t[2][3]*e[3][3]],[t[3][0]*e[0][0]+t[3][1]*e[1][0]+t[3][2]*e[2][0]+t[3][3]*e[3][0],t[3][0]*e[0][1]+t[3][1]*e[1][1]+t[3][2]*e[2][1]+t[3][3]*e[3][1],t[3][0]*e[0][2]+t[3][1]*e[1][2]+t[3][2]*e[2][2]+t[3][3]*e[3][2],t[3][0]*e[0][3]+t[3][1]*e[1][3]+t[3][2]*e[2][3]+t[3][3]*e[3][3]]]}function J(...t){return t.reduce((e,n)=>X(e,n))}const Q=.1,Z=300;function k(t){const e=q(t.fieldOfView),n=W(Q,Z),o=G(t.position),c=Y(t.orientation.horizontalRadians),s=K(t.orientation.verticalRadians),i=J(o,c,s,n,e);return new Float32Array(i.flat())}const r=class r{constructor(e,n){a(this,"gl");a(this,"uniformProjectionLocation");this.gl=e,this.uniformProjectionLocation=n}static create(e){e.clearColor(0,0,0,1);const n=U(r.attributePositionVariableName,r.attributeColorVariableName,r.uniformProjectionVariableName),o=j(e,n);e.useProgram(o);const c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c);const s=e.getAttribLocation(o,r.attributePositionVariableName);e.enableVertexAttribArray(s),e.vertexAttribPointer(s,r.positionSize,e.FLOAT,!1,r.strideBytes,r.positionOffsetBytes);const i=e.getAttribLocation(o,r.attributeColorVariableName);e.enableVertexAttribArray(i),e.vertexAttribPointer(i,r.colorSize,e.FLOAT,!1,r.strideBytes,r.colorOffsetBytes);const u=e.getUniformLocation(o,r.uniformProjectionVariableName);return e.enable(e.DEPTH_TEST),e.depthFunc(e.LESS),new r(e,u)}paint(e,n){this.gl.clear(this.gl.COLOR_BUFFER_BIT);const o=O(e);this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.STATIC_DRAW);const c=k(n);this.gl.uniformMatrix4fv(this.uniformProjectionLocation,!1,c),this.gl.drawArrays(this.gl.TRIANGLES,0,e.length*r.vertexInTriangleCount)}resize(){const e=this.gl.canvas,n=e.parentElement;e.width=n.clientWidth,e.height=n.clientHeight,this.gl.viewport(0,0,e.width,e.height)}getCanvasDimensions(){const e=this.gl.canvas;return{width:e.width,height:e.height}}};a(r,"dimensionInCoordinatesCount",3),a(r,"componentInColorCount",3),a(r,"vertexInTriangleCount",3),a(r,"attributePositionVariableName","a_position"),a(r,"positionSize",r.dimensionInCoordinatesCount),a(r,"positionOffsetBytes",0),a(r,"attributeColorVariableName","a_color"),a(r,"colorSize",r.componentInColorCount),a(r,"colorOffsetBytes",r.positionSize*Float32Array.BYTES_PER_ELEMENT),a(r,"strideBytes",(r.positionSize+r.colorSize)*Float32Array.BYTES_PER_ELEMENT),a(r,"uniformProjectionVariableName","u_projection");let C=r;function _(t,e){return{verticalRadians:Math.min(e,Math.atan(Math.tan(e/2)*(t.height/t.width))*2),horizontalRadians:Math.min(e,Math.atan(Math.tan(e/2)*(t.width/t.height))*2)}}function m(){return{horizontalRadians:3e-4*Date.now()+Math.PI,verticalRadians:.05*Math.sin(.003*Date.now())}}const R=3;function x(){return{x:R*Math.sin(3e-4*Date.now()),y:1*Math.sin(.001*Date.now()),z:R*Math.cos(3e-4*Date.now())}}function S(t,e){const n=_(t,e),o=x(),c=m();return{position:o,orientation:c,fieldOfView:n}}function f(t,e,n,o){return[{vertex1:t,vertex2:e,vertex3:n},{vertex1:t,vertex2:n,vertex3:o}]}function ee(){return{position:{x:-.5*(1+(1+Math.sin(.002*Date.now()))/2),y:-.5*(1+(1+Math.sin(.002*Date.now()))/2),z:.5*(1+(1+Math.sin(.002*Date.now()))/2)},color:{red:0,green:0,blue:1}}}function te(){return{position:{x:-.5*(1+(1+Math.sin(.002*Date.now()))/2),y:-.5*(1+(1+Math.sin(.002*Date.now()))/2),z:-.5*(1+(1+Math.sin(.002*Date.now()))/2)},color:{red:0,green:0,blue:0}}}function ne(){return{position:{x:-.5*(1+(1+Math.sin(.002*Date.now()))/2),y:.5*(1+(1+Math.sin(.002*Date.now()))/2),z:.5*(1+(1+Math.sin(.002*Date.now()))/2)},color:{red:0,green:1,blue:1}}}function oe(){return{position:{x:-.5*(1+(1+Math.sin(.002*Date.now()))/2),y:.5*(1+(1+Math.sin(.002*Date.now()))/2),z:-.5*(1+(1+Math.sin(.002*Date.now()))/2)},color:{red:0,green:1,blue:0}}}function re(){return{position:{x:.5*(1+(1+Math.sin(.002*Date.now()))/2),y:-.5*(1+(1+Math.sin(.002*Date.now()))/2),z:.5*(1+(1+Math.sin(.002*Date.now()))/2)},color:{red:1,green:0,blue:1}}}function ce(){return{position:{x:.5*(1+(1+Math.sin(.002*Date.now()))/2),y:-.5*(1+(1+Math.sin(.002*Date.now()))/2),z:-.5*(1+(1+Math.sin(.002*Date.now()))/2)},color:{red:1,green:0,blue:0}}}function se(){return{position:{x:.5*(1+(1+Math.sin(.002*Date.now()))/2),y:.5*(1+(1+Math.sin(.002*Date.now()))/2),z:.5*(1+(1+Math.sin(.002*Date.now()))/2)},color:{red:1,green:1,blue:1}}}function ie(){return{position:{x:.5*(1+(1+Math.sin(.002*Date.now()))/2),y:.5*(1+(1+Math.sin(.002*Date.now()))/2),z:-.5*(1+(1+Math.sin(.002*Date.now()))/2)},color:{red:1,green:1,blue:0}}}function V(){const t=te(),e=ee(),n=oe(),o=ne(),c=ce(),s=re(),i=ie(),u=se(),M=f(t,c,s,e),g=f(n,i,u,o),b=f(t,n,o,e),p=f(c,i,u,s),w=f(t,c,i,n),A=f(e,s,u,o);return[...M,...g,...b,...p,...w,...A]}function D(t,e){const n=[],o={red:1,green:1,blue:1},c={red:0,green:0,blue:0};for(let s=-t;s<t;s+=e)for(let i=-t;i<t;i+=e){const u=(s/e+i/e)%2===0?o:c,M={coordinates:{x:s,y:0,z:i},color:u},g={coordinates:{x:s+e,y:0,z:i},color:u},b={coordinates:{x:s+e,y:0,z:i+e},color:u},p={coordinates:{x:s,y:0,z:i+e},color:u},w=f(M,g,b,p);n.push(...w)}return n}const ae=document.getElementById("canvas"),ue=ae.getContext("webgl2"),h=C.create(ue),he=D(10,1),fe=V();let d=[...he,...fe];h.resize();const le=h.getCanvasDimensions(),T=.7*Math.PI;let l=S(le,T);h.paint(d,l);window.addEventListener("resize",function(){h.resize();const e=h.getCanvasDimensions();l=S(e,T),h.paint(d,l)});requestAnimationFrame(function t(){const e=D(10,1),n=V();d=[...e,...n];const o=h.getCanvasDimensions();l=S(o,T),h.paint(d,l),requestAnimationFrame(t)});
